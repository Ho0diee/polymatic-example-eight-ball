<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="user-scalable=no, width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
  <link rel="stylesheet" href="./style.css">
  <meta name="theme-color" content="#323130" />
  <meta name="color-scheme" content="dark" />
</head>

<body>
  <!-- Slowmo vignette overlay -->
  <div id="slowmo-vignette"></div>

  <div class="container" style="position:relative;z-index:1;">
    <h1>Web3 Pool</h1>
    <p class="subtitle">Play real-stake 8-ball matches powered by Phantom &amp; Solana.</p>
    <div class="form-group">
      <label for="playerName">Enter Your Name</label>
      <input type="text" id="playerName" placeholder="Your name here..." autocomplete="off" maxlength="50" />
      <div class="error-message" id="errorMessage">Please enter a valid name</div>
    </div>
    <div class="buttons-container">
      <div style="display:flex;flex-direction:column;align-items:center;">
        <button class="game-btn" id="createGameBtn">ðŸ’° Create Game Link</button>
        <input type="text" id="gameLink" readonly style="margin-top:10px;width:100%;display:none;" />
        <button class="game-btn secondary-btn" id="copyGameLinkBtn" style="display:none;">Copy Game Link</button>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;">
        <button class="game-btn secondary-btn" onclick="joinCustomGame()">ðŸŽ± Join Custom Game</button>
      </div>
    </div>
  </div>
  <script>
    // Create game link logic
    document.getElementById('createGameBtn').onclick = function() {
      const playerName = document.getElementById('playerName').value.trim();
      if (!playerName) {
        document.getElementById('errorMessage').style.display = 'block';
        return;
      }
      document.getElementById('errorMessage').style.display = 'none';
      // Generate a unique game code
      const gameCode = Math.random().toString(36).substr(2, 8);
      const link = window.location.origin + '/?join=' + gameCode;
      document.getElementById('gameLink').value = link;
      document.getElementById('gameLink').style.display = 'block';
      document.getElementById('copyGameLinkBtn').style.display = 'block';
      // Store game code for later joining
      sessionStorage.setItem('gameCode', gameCode);
      sessionStorage.setItem('playerName', playerName);
    };
    document.getElementById('copyGameLinkBtn').onclick = function() {
      const link = document.getElementById('gameLink').value;
      navigator.clipboard.writeText(link);
      alert('Game link copied! Share it with your friend to join.');
    };
    // Join custom game logic
    function joinCustomGame() {
      const code = prompt('Enter custom game code (or share link):');
      if (!code) return;
      // Store code and redirect to game lobby
      sessionStorage.setItem('gameCode', code);
      window.location.href = 'game-lobby.html?join=' + code;
    }
  </script>
</body>

</html>